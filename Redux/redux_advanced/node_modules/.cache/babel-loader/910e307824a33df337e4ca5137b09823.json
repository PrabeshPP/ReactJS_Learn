{"ast":null,"code":"import { showCartActions } from \"./UI\";\nimport { cartSliceAction } from \"./cart-slice\";\nexport const fetchData = () => {\n  return async dispatch => {\n    const fetchCart = async () => {\n      const response = await fetch(\"https://foodapp-c413b-default-rtdb.firebaseio.com/cart.json\");\n\n      if (!response.ok) {\n        throw new Response(\"unable to fetch the data!\");\n      }\n\n      const data = await response.json();\n      return data;\n    };\n\n    try {\n      const data = await fetchCart();\n      dispatch(cartSliceAction.replaceCart({\n        items: data.items || [],\n        totalQuantity: data.totalQuantity\n      }));\n    } catch (err) {\n      dispatch(showCartActions.showNotification({\n        status: \"error\",\n        title: \"Error!\",\n        message: \"Fetching Cart Data Failed!\"\n      }));\n    }\n  };\n};\nexport const sendCartData = cart => {\n  return async dispatch => {\n    dispatch(showCartActions.showNotification({\n      status: \"Pending\",\n      title: \"Sending...\",\n      message: \"Sending Cart Data\"\n    }));\n\n    const sendRequest = async () => {\n      const response = await fetch(\"https://foodapp-c413b-default-rtdb.firebaseio.com/cart.json\", {\n        method: \"PUT\",\n        body: JSON.stringify(cart)\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Sending Cart Data failed!\");\n      }\n    };\n\n    try {\n      await sendRequest();\n      dispatch(showCartActions.showNotification({\n        status: \"success\",\n        title: \"Success!\",\n        message: \"Sent Cart Data Successfully!\"\n      }));\n    } catch (error) {\n      dispatch(showCartActions.showNotification({\n        status: \"error\",\n        title: \"Error!\",\n        message: \"Could not Sent Cart Data Successfully!\"\n      }));\n    }\n  };\n};","map":{"version":3,"sources":["C:/Users/prabe/OneDrive/Desktop/ReactJS/reactJS_intro/Redux/redux_advanced/src/Store/cart-actions.js"],"names":["showCartActions","cartSliceAction","fetchData","dispatch","fetchCart","response","fetch","ok","Response","data","json","replaceCart","items","totalQuantity","err","showNotification","status","title","message","sendCartData","cart","sendRequest","method","body","JSON","stringify","Error","error"],"mappings":"AAAA,SAASA,eAAT,QAAgC,MAAhC;AACA,SAASC,eAAT,QAAgC,cAAhC;AAEA,OAAO,MAAMC,SAAS,GAAC,MAAI;AACvB,SAAO,MAAOC,QAAP,IAAkB;AACrB,UAAMC,SAAS,GAAC,YAAS;AACrB,YAAMC,QAAQ,GAAC,MAAMC,KAAK,CAAE,6DAAF,CAA1B;;AACA,UAAG,CAACD,QAAQ,CAACE,EAAb,EAAgB;AACZ,cAAM,IAAIC,QAAJ,CAAa,2BAAb,CAAN;AACH;;AAED,YAAMC,IAAI,GAAC,MAAMJ,QAAQ,CAACK,IAAT,EAAjB;AAEA,aAAOD,IAAP;AACH,KATD;;AAWA,QAAG;AACC,YAAMA,IAAI,GAAC,MAAML,SAAS,EAA1B;AACAD,MAAAA,QAAQ,CAACF,eAAe,CAACU,WAAhB,CAA4B;AACjCC,QAAAA,KAAK,EAACH,IAAI,CAACG,KAAL,IAAc,EADa;AAEjCC,QAAAA,aAAa,EAACJ,IAAI,CAACI;AAFc,OAA5B,CAAD,CAAR;AAIH,KAND,CAMC,OAAMC,GAAN,EAAU;AACPX,MAAAA,QAAQ,CACJH,eAAe,CAACe,gBAAhB,CAAiC;AAC/BC,QAAAA,MAAM,EAAE,OADuB;AAE/BC,QAAAA,KAAK,EAAE,QAFwB;AAG/BC,QAAAA,OAAO,EAAE;AAHsB,OAAjC,CADI,CAAR;AAQH;AAEJ,GA7BD;AA8BH,CA/BM;AAiCP,OAAO,MAAMC,YAAY,GAAIC,IAAD,IAAU;AAClC,SAAO,MAAOjB,QAAP,IAAoB;AACzBA,IAAAA,QAAQ,CACNH,eAAe,CAACe,gBAAhB,CAAiC;AAC/BC,MAAAA,MAAM,EAAE,SADuB;AAE/BC,MAAAA,KAAK,EAAE,YAFwB;AAG/BC,MAAAA,OAAO,EAAE;AAHsB,KAAjC,CADM,CAAR;;AAQA,UAAMG,WAAW,GAAG,YAAY;AAC9B,YAAMhB,QAAQ,GAAG,MAAMC,KAAK,CAC1B,6DAD0B,EAE1B;AACEgB,QAAAA,MAAM,EAAE,KADV;AAEEC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeL,IAAf;AAFR,OAF0B,CAA5B;;AAQA,UAAI,CAACf,QAAQ,CAACE,EAAd,EAAkB;AAChB,cAAM,IAAImB,KAAJ,CAAU,2BAAV,CAAN;AACD;AACF,KAZD;;AAcA,QAAI;AACA,YAAML,WAAW,EAAjB;AACAlB,MAAAA,QAAQ,CACJH,eAAe,CAACe,gBAAhB,CAAiC;AAC/BC,QAAAA,MAAM,EAAE,SADuB;AAE/BC,QAAAA,KAAK,EAAE,UAFwB;AAG/BC,QAAAA,OAAO,EAAE;AAHsB,OAAjC,CADI,CAAR;AAOH,KATD,CASE,OAAOS,KAAP,EAAc;AACZxB,MAAAA,QAAQ,CACJH,eAAe,CAACe,gBAAhB,CAAiC;AAC/BC,QAAAA,MAAM,EAAE,OADuB;AAE/BC,QAAAA,KAAK,EAAE,QAFwB;AAG/BC,QAAAA,OAAO,EAAE;AAHsB,OAAjC,CADI,CAAR;AASH;AAGF,GA7CD;AA8CD,CA/CI","sourcesContent":["import { showCartActions } from \"./UI\";\r\nimport { cartSliceAction } from \"./cart-slice\";\r\n\r\nexport const fetchData=()=>{\r\n    return async (dispatch)=>{\r\n        const fetchCart=async()=>{\r\n            const response=await fetch( \"https://foodapp-c413b-default-rtdb.firebaseio.com/cart.json\");\r\n            if(!response.ok){\r\n                throw new Response(\"unable to fetch the data!\");\r\n            }\r\n\r\n            const data=await response.json();\r\n\r\n            return data;\r\n        }\r\n\r\n        try{\r\n            const data=await fetchCart();\r\n            dispatch(cartSliceAction.replaceCart({\r\n                items:data.items || [],\r\n                totalQuantity:data.totalQuantity \r\n            }));\r\n        }catch(err){\r\n            dispatch(\r\n                showCartActions.showNotification({\r\n                  status: \"error\",\r\n                  title: \"Error!\",\r\n                  message: \"Fetching Cart Data Failed!\",\r\n                })\r\n              )\r\n\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport const sendCartData = (cart) => {\r\n    return async (dispatch) => {\r\n      dispatch(\r\n        showCartActions.showNotification({\r\n          status: \"Pending\",\r\n          title: \"Sending...\",\r\n          message: \"Sending Cart Data\",\r\n        })\r\n      );\r\n  \r\n      const sendRequest = async () => {\r\n        const response = await fetch(\r\n          \"https://foodapp-c413b-default-rtdb.firebaseio.com/cart.json\",\r\n          {\r\n            method: \"PUT\",\r\n            body: JSON.stringify(cart),\r\n          }\r\n        );\r\n  \r\n        if (!response.ok) {\r\n          throw new Error(\"Sending Cart Data failed!\");\r\n        }\r\n      };\r\n  \r\n      try {\r\n          await sendRequest();\r\n          dispatch(\r\n              showCartActions.showNotification({\r\n                status: \"success\",\r\n                title: \"Success!\",\r\n                message: \"Sent Cart Data Successfully!\",\r\n              })\r\n            );\r\n      } catch (error) {\r\n          dispatch(\r\n              showCartActions.showNotification({\r\n                status: \"error\",\r\n                title: \"Error!\",\r\n                message: \"Could not Sent Cart Data Successfully!\",\r\n              })\r\n            )\r\n  \r\n          \r\n      }\r\n  \r\n     \r\n    };\r\n  };"]},"metadata":{},"sourceType":"module"}